{
  "variables": {
    "zone": "var",
    "project_id": "var",
    "service_account_json": "var",
    "k8s_version": "1.9.4-00",
    "cni_version": "0.6.0-00",
    "docker_version":"17.03.2~ce-0~ubuntu-xenial"
  },
  
  "builders": [
    {
      "type": "googlecompute",
      "image_name": "packer-centos-7-{{timestamp}}",
      "image_family": "k8s",
      "project_id": "{{user `project_id`}}",
      "source_image": "centos-7-v20181210",
      "source_image_family": "centos-7",
      "ssh_username": "packer",
      "zone": "{{user `zone`}}",
      "account_file": "{{ user `service_account_json`}}"
    }
  ],
  "provisioners": [
    {
      "type": "ansible",
      "playbook_file": "../ansible/k8s.yaml"
    }
  ]
}
